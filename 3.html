<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8">
    <title>CZ 3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="stl.css">
    <link rel="stylesheet" href="highlight.css">
    <script src="highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad()</script>
    <script src="queue.js"></script>
    <script src="3.js" defer></script>
  </head>
  <body>
    <h1>REFINANDO O CAMINHO</h1>
    <hr>
    <table>
      <tbody>
        <tr><td id="linha-0_coluna-0"></td><td id="linha-0_coluna-1"></td><td id="linha-0_coluna-2"></td><td id="linha-0_coluna-3"></td><td id="linha-0_coluna-4"></td><td id="linha-0_coluna-5"></td><td id="linha-0_coluna-6"></td></tr>
        <tr><td id="linha-1_coluna-0"></td><td id="linha-1_coluna-1"></td><td id="linha-1_coluna-2"></td><td id="linha-1_coluna-3"></td><td id="linha-1_coluna-4"></td><td id="linha-1_coluna-5"></td><td id="linha-1_coluna-6"></td></tr>
        <tr><td id="linha-2_coluna-0"></td><td id="linha-2_coluna-1"></td><td id="linha-2_coluna-2"></td><td id="linha-2_coluna-3"></td><td id="linha-2_coluna-4"></td><td id="linha-2_coluna-5"></td><td id="linha-2_coluna-6"></td></tr>
        <tr><td id="linha-3_coluna-0"></td><td id="linha-3_coluna-1"></td><td id="linha-3_coluna-2"></td><td id="linha-3_coluna-3"></td><td id="linha-3_coluna-4"></td><td id="linha-3_coluna-5"></td><td id="linha-3_coluna-6"></td></tr>
        <tr><td id="linha-4_coluna-0"></td><td id="linha-4_coluna-1"></td><td id="linha-4_coluna-2"></td><td id="linha-4_coluna-3"></td><td id="linha-4_coluna-4"></td><td id="linha-4_coluna-5"></td><td id="linha-4_coluna-6"></td></tr>
        <tr><td id="linha-5_coluna-0"></td><td id="linha-5_coluna-1"></td><td id="linha-5_coluna-2"></td><td id="linha-5_coluna-3"></td><td id="linha-5_coluna-4"></td><td id="linha-5_coluna-5"></td><td id="linha-5_coluna-6"></td></tr>
        <tr><td id="linha-6_coluna-0"></td><td id="linha-6_coluna-1"></td><td id="linha-6_coluna-2"></td><td id="linha-6_coluna-3"></td><td id="linha-6_coluna-4"></td><td id="linha-6_coluna-5"></td><td id="linha-6_coluna-6"></td></tr>
      </tbody>
    </table>
    <hr>
    <h2>lembrando o caminho</h2>
<pre><code class="javascript">
/**
 * por dentro coleraProfunda:
 */
const lastAux = aux.pop()
lastAux.dom.innerText = '#'
lastAux.jaPasseiAqui = true

const neighborLastAux = vizinhos(lastAux).filter(e => !e.jaPasseiAqui)

neighborLastAux.forEach(function (e) {
  e.dom.innerText = '*'
  e.caminho = [...lastAux.caminho]
  e.caminho.push(e)
})
aux.push(...neighborLastAux)
</pre></code>
<pre><code class="javascript">
/**
 * marcando caminho
 */
tabela[3][3].caminho.forEach(
  e => e.dom.classList.toggle('red')
)
</pre></code>
  <hr>
  <h2>busca em largura</h2>
  <img src="meteoroPegasus.png" alt="meteoro de pagasus">
<pre><code class="javascript">
/**
 * meteoroPegasus
 */
const xua = new Queue()
xua.push(entrada)

function meteoroPegasus () {
  const firstXua = xua.shift()
  firstXua.dom.innerText = '#'
  firstXua.jaPasseiAqui = true

  const neighborLastAux = vizinhos(firstXua).filter(e => !e.jaPasseiAqui)

  neighborLastAux.forEach(function (e) {
    e.dom.innerText = '*'
    e.caminho = [...firstXua.caminho]
    e.caminho.push(e)
  })
  aux.push(...neighborLastAux)
}
</pre></code>
  <hr>
  <h2>terrenos custosos</h2>
  <table>
    <tbody>
      <tr><td id="l0c0"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l0c1"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l0c2"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l0c3"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l0c4"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l0c5"><input type="number" step="5" min="5" max="95" value="5"></td><td id="l0c6"><input type="number" step="5" min="5" max="95" value="5"></td></tr>
      <tr><td id="l1c0"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l1c1"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l1c2"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l1c3"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l1c4"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l1c5"><input type="number" step="5" min="5" max="95" value="5"></td><td id="l1c6"><input type="number" step="5" min="5" max="95" value="5"></td></tr>
      <tr><td id="l2c0"><input type="number" step="5" min="5" max="95" value="80"></td><td id="l2c1"><input type="number" step="5" min="5" max="95" value="80"></td><td id="l2c2"><input type="number" step="5" min="5" max="95" value="80"></td><td id="l2c3"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l2c4"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l2c5"><input type="number" step="5" min="5" max="95" value="20"></td><td id="l2c6"><input type="number" step="5" min="5" max="95" value="20"></td></tr>
      <tr><td id="l3c0"><input type="number" step="5" min="5" max="95" value="80"></td><td id="l3c1"><input type="number" step="5" min="5" max="95" value="90"></td><td id="l3c2"><input type="number" step="5" min="5" max="95" value="80"></td><td id="l3c3"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l3c4"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l3c5"><input type="number" step="5" min="5" max="95" value="20"></td><td id="l3c6"><input type="number" step="5" min="5" max="95" value="20"></td></tr>
      <tr><td id="l4c0"><input type="number" step="5" min="5" max="95" value="70"></td><td id="l4c1"><input type="number" step="5" min="5" max="95" value="90"></td><td id="l4c2"><input type="number" step="5" min="5" max="95" value="80"></td><td id="l4c3"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l4c4"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l4c5"><input type="number" step="5" min="5" max="95" value="20"></td><td id="l4c6"><input type="number" step="5" min="5" max="95" value="20"></td></tr>
      <tr><td id="l5c0"><input type="number" step="5" min="5" max="95" value="60"></td><td id="l5c1"><input type="number" step="5" min="5" max="95" value="80"></td><td id="l5c2"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l5c3"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l5c4"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l5c5"><input type="number" step="5" min="5" max="95" value="20"></td><td id="l5c6"><input type="number" step="5" min="5" max="95" value="10"></td></tr>
      <tr><td id="l6c0"><input type="number" step="5" min="5" max="95" value="40"></td><td id="l6c1"><input type="number" step="5" min="5" max="95" value="60"></td><td id="l6c2"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l6c3"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l6c4"><input type="number" step="5" min="5" max="95" value="30"></td><td id="l6c5"><input type="number" step="5" min="5" max="95" value="10"></td><td id="l6c6"><input type="number" step="5" min="5" max="95" value="5"></td></tr>
    </tbody>
  </table>
<pre><code class="javascript">
/**
 * meteoroPegasusMaisEsperto
 *
 * mapa[3][3] = {
 *   linha: 3,
 *   coluna: 3,
 *   custo: 30,
 *   caminho: [],
 *   custoCaminho: Infinity,
 *   dom: `#l${i}c${j}`
 * }
 */
const fila = new Queue()

function meteoroPegasusMaisEsperto () {
  const firstFila = fila.shift()

  const neighborFirstFila = vizinhos(firstFila).map(
    e => mapa[e.coluna][e.linha]
  ).filter(
    e => e.custoCaminho > firstFila.custoCaminho + e.custo
  ).map(e => {
    e.caminho = [...firstFila.caminho]
    e.caminho.push(e)
    e.custoCaminho = firstFila.custoCaminho + e.custo

    return e
  })

  fila.push(...neighborFirstFila)
}

while(fila.length !== 0){
  meteoroPegasusMaisEsperto()
}

</pre></code>
  </body>
</html>
